<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Linux环境," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Linux环境安装准备自己安装 常用的开发环境 tomcat redis zookeeper kafka mysql 等，记录一些自身的遇到的问题。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux环境安装">
<meta property="og:url" content="http://guilongyue.github.io/2018/09/22/linux环境安装/index.html">
<meta property="og:site_name" content="沉默的风">
<meta property="og:description" content="Linux环境安装准备自己安装 常用的开发环境 tomcat redis zookeeper kafka mysql 等，记录一些自身的遇到的问题。">
<meta property="og:updated_time" content="2019-07-16T03:26:14.050Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux环境安装">
<meta name="twitter:description" content="Linux环境安装准备自己安装 常用的开发环境 tomcat redis zookeeper kafka mysql 等，记录一些自身的遇到的问题。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://guilongyue.github.io/2018/09/22/linux环境安装/"/>





  <title> Linux环境安装 | 沉默的风 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">沉默的风</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://guilongyue.github.io/2018/09/22/linux环境安装/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="guilong yue">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="沉默的风">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="沉默的风" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Linux环境安装
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-22T23:10:25+08:00">
                2018-09-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/实践/" itemprop="url" rel="index">
                    <span itemprop="name">实践</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/09/22/linux环境安装/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/09/22/linux环境安装/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Linux环境安装"><a href="#Linux环境安装" class="headerlink" title="Linux环境安装"></a>Linux环境安装</h1><p>准备自己安装 常用的开发环境 tomcat redis zookeeper kafka mysql 等，记录一些自身的遇到的问题。</p>
<a id="more"></a>
<h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><ul>
<li>因为Linux 环境可能已经安装了PCRE ZLIB openssl库，若没有装 yum 安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar -zxvf nginx-1.1.10.tar.gz</div><div class="line">cd nginx-1.1.10</div><div class="line">./configure</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<ul>
<li>ps -ef|grep nginx</li>
<li>kill -QUIT 2072</li>
<li>kill -TERM 2132</li>
<li>进入nginx安装目录sbin下，输入命令./nginx -t 检测配置是否正确</li>
<li>进入nginx可执行目录sbin下，输入命令./nginx -s reload 即可</li>
</ul>
<h2 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h2><h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1. 下载"></a>1. 下载</h3><p>java -version，如果显示jdk版本号，则证明已经安装，如果不显示，则证明没有安装，如果没有安装，请参考下面地址进行安装：<a href="http://www.cnblogs.com/hanyinglong/p/5025635.html" target="_blank" rel="external">http://www.cnblogs.com/hanyinglong/p/5025635.html</a> </p>
<h3 id="2-因为原有系统中安装了tomcat。需要重新修改环境变量。"><a href="#2-因为原有系统中安装了tomcat。需要重新修改环境变量。" class="headerlink" title="2. 因为原有系统中安装了tomcat。需要重新修改环境变量。"></a>2. 因为原有系统中安装了tomcat。需要重新修改环境变量。</h3><p>查看系统状况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">uname -a </div><div class="line">lsb_release -a</div><div class="line">cat /proc/version</div></pre></td></tr></table></figure></p>
<p>安装 tar -zxvf apache-tomcat-8.0.29.tar.gz<br>修改端口  shutdown 8005  http 8080  ajp 8009<br>修改配置文件  增加两个tomcat的环境变量<br>source /etc/profile<br>linux查看端口被哪个进程占用<br>lsof -i:端口号</p>
<h3 id="当前没有开启防火墙"><a href="#当前没有开启防火墙" class="headerlink" title="当前没有开启防火墙"></a>当前没有开启防火墙</h3><blockquote>
<p>可使用”iptables –L –n”查看当前iptables规则<br>添加指定端口到防火墙中<br>iptables -I INPUT -p 协议 –dport 端口号 -j ACCEPT<br>iptables -I INPUT -p udp –dport 161 -j ACCEPT<br>iptables -I INPUT -p tcp –dport 8080 -j ACCEPT</p>
<p>查询防火墙状态:<br>[root@localhost ~]# service   iptables status<br>停止防火墙:<br>[root@localhost ~]# service   iptables stop<br>启动防火墙:<br>[root@localhost ~]# service   iptables start<br>重启防火墙:<br>[root@localhost ~]# service   iptables restart<br>永久关闭防火墙:<br>[root@localhost ~]# chkconfig   iptables off<br>永久关闭后启用:<br>[root@localhost ~]# chkconfig   iptables on</p>
</blockquote>
<h3 id="查看日志-查看关键词附近日志"><a href="#查看日志-查看关键词附近日志" class="headerlink" title="查看日志 查看关键词附近日志"></a>查看日志 查看关键词附近日志</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">grep -A 5 可以显示匹配内容以及后面的5行内容</div><div class="line">grep -B 5 可以显示匹配内容以及前面的5行内容</div><div class="line">grep -C 5 可以显示匹配内容以及前后面的5行内容</div></pre></td></tr></table></figure>
<h3 id="rpm安装"><a href="#rpm安装" class="headerlink" title="rpm安装"></a>rpm安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">1.安装一个包</div><div class="line">　　# rpm -ivh</div><div class="line">　　2.升级一个包</div><div class="line">　　# rpm -Uvh</div><div class="line">　　3.移走一个包</div><div class="line">　　# rpm -e</div><div class="line">　　4.安装参数</div><div class="line">　　--force 即使覆盖属于其它包的文件也强迫安装</div><div class="line">　　--nodeps 如果该RPM包的安装依赖其它包，即使其它包没装，也强迫安装。</div><div class="line">　　5.查询一个包是否被安装</div><div class="line">　　# rpm -q &lt; rpm package name&gt;</div><div class="line">　　6.得到被安装的包的信息</div><div class="line">　　# rpm -qi &lt; rpm package name&gt;</div><div class="line">　　7.列出该包中有哪些文件</div><div class="line">　　# rpm -ql &lt; rpm package name&gt;</div><div class="line">　　8.列出服务器上的一个文件属于哪一个RPM包</div><div class="line">　　#rpm -qf</div><div class="line">　　9.可综合好几个参数一起用</div><div class="line">　　# rpm -qil &lt; rpm package name&gt;</div><div class="line">　　10.列出所有被安装的rpm package</div><div class="line">　　# rpm -qa</div><div class="line">　　11.列出一个未被安装进系统的RPM包文件中包含有哪些文件？</div><div class="line">　　# rpm -qilp &lt; rpm package name&gt;</div></pre></td></tr></table></figure>
<h3 id="make-安装"><a href="#make-安装" class="headerlink" title="make 安装"></a>make 安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">1.下载源代码 </div><div class="line">2.解压源代码 </div><div class="line">tar –xvzf package_name </div><div class="line">3.执行./configure </div><div class="line">用来生成makefile,为编译做准备,prefix选项和以指定安装位置(用–help查看更多的帮助) </div><div class="line">4.make编译 </div><div class="line">执行的就是上一步生成的makefile文件 </div><div class="line">5.make install安装 </div><div class="line">有些时候需要root权限 </div><div class="line">6.make clean清除临时文件</div><div class="line"></div><div class="line">make uninstall/distclean/veryclean 等等。如果没有，</div></pre></td></tr></table></figure>
<h2 id="Linux-中挖矿病毒"><a href="#Linux-中挖矿病毒" class="headerlink" title="　Linux 中挖矿病毒"></a>　Linux 中挖矿病毒</h2><p>因为中毒会随系统的启动而启动的，所以一般会开机启动，检查一下启动的服务或者文件是否有异常，一般会在/etc/rc.local   和 crondtab -l  显示出来。所以要注意检查一下，以上三点都是比较常见的特征，还会有些不明显的特征需要留意下。<br>ps  -aux   命令可以查看到<br>再接着，我检查一下开机启动项  chkconfig    –list     |  grep  3:on<br>服务器启动级别是3的，我检查一下了开机启动项，没有特别明显的服务。然后检查了一下开机启动的一个文件，more   /etc/rc.local </p>
<h2 id="mongo"><a href="#mongo" class="headerlink" title="mongo"></a>mongo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">tar -zxvf mongodb-linux-x86_64-debian92-4.0.3.tgz</div><div class="line">ls -la</div><div class="line"></div><div class="line">mkdir mongodb</div><div class="line">mv mongodb-linux-x86_64-debian92-4.0.3 mongodb</div><div class="line">cd mongodb</div><div class="line">mkdir data</div><div class="line">mkdir logs</div><div class="line">cd logs/</div><div class="line">touch mongo.log</div><div class="line"></div><div class="line">vim mongo.conf</div><div class="line">dbpath=/mongodb/data</div><div class="line">logpath=/mongodb/logs/mongo.log</div><div class="line">logappend=true</div><div class="line">journal=true</div><div class="line">quiet=true</div><div class="line">port=27017</div><div class="line">fork=true #后台运行</div><div class="line">bind_ip=0.0.0.0 #允许任何IP进行连接</div><div class="line">auth=false #是否授权连接</div></pre></td></tr></table></figure>
<p>export PATH=$PATH:/mongodb/mongodb-linux-x86_64-debian92-4.0.3/bin<br>source /etc/profile</p>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>mongod -f mongodb.conf<br>开发环境配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">dbpath=/root/mongodb_3.4.21/data/db</div><div class="line">logpath=/root/mongodb_3.4.21/log/mongodb.log</div><div class="line">port=27017</div><div class="line">fork=true</div></pre></td></tr></table></figure></p>
<h2 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h2><p>1.获取redis资源<br>wget <a href="http://download.redis.io/releases/redis-4.0.8.tar.gz" target="_blank" rel="external">http://download.redis.io/releases/redis-4.0.8.tar.gz</a><br>2.解压<br>tar xzvf redis-4.0.8.tar.gz<br>3.安装<br>(1)cd redis-4.0.8<br>(2)make<br>(3)cd src<br>(4)make install PREFIX=/usr/local/redis</p>
<p>5.配置redis为后台启动<br>vi /usr/local/redis/etc/redis.conf //将daemonize no 改成daemonize yes<br>6.将redis加入到开机启动<br>vi /etc/rc.local //在里面添加内容：/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf (意思就是开机调用这段开启redis的命令)<br>7.开启redis<br>/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf<br>测试redis是否安装成功：./redis-cli</p>
<h2 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h2><p>一、下载maven安装包<br>1.切换到想要放置安装包的目录,比如/usr/local/src<br>        cd /usr/local/src<br>2.通过wget下载<br>        wget <a href="http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.3/binaries/apache-maven-3.5.3-bin.tar.gz" target="_blank" rel="external">http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.3/binaries/apache-maven-3.5.3-bin.tar.gz</a><br>     连接地址的来源：打开maven官网，找到要下载的版本的tar.gz,右键复制连接地址即可<br>二、安装<br>3.解压缩：tar -zxvf 安装包 。如：tar -zxvf apache-maven-3.5.3-bin.tar.gz<br>下面的步骤可选：<br>4.重命名：mv apache-maven-3.5.3 maven<br>5.移动到标准安装位置： mv maven /usr/local<br>三、配置环境变量<br>6、配置maven环境变量<br>vi /etc/profile<br>在末尾添加环境变量<br>export MAVEN_HOME=/usr/local/maven<br>export PATH=$JAVA_HOME/bin:$MAVEN_HOME/bin:$PATH<br>其中:$MAVEN_HOME/bin添加在:$PATH前面<br>7.编辑之后记得使用source /etc/profile命令是改动生效。<br>三、校验<br> 1、验证结果<br>    在任意路径下执行mvn -version验证命令是否有效。<br>    正常结果如下，能够看到当前maven及jdk版本。</p>
<h2 id="zookeeper"><a href="#zookeeper" class="headerlink" title="zookeeper"></a>zookeeper</h2><h3 id="单机"><a href="#单机" class="headerlink" title="单机"></a>单机</h3><p>上面提到，conf目录下提供了配置的样例zoo_sample.cfg，要将zk运行起来，需要将其名称修改为zoo.cfg。<br>打开zoo.cfg，可以看到默认的一些配置。</p>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><ul>
<li>tickTime<br>时长单位为毫秒，为zk使用的基本时间度量单位。例如，1 <em> tickTime是客户端与zk服务端的心跳时间，2 </em> tickTime是客户端会话的超时时间。<br>tickTime的默认值为2000毫秒，更低的tickTime值可以更快地发现超时问题，但也会导致更高的网络流量（心跳消息）和更高的CPU使用率（会话的跟踪处理）。</li>
<li>clientPort<br>zk服务进程监听的TCP端口，默认情况下，服务端会监听2181端口。</li>
<li>dataDir<br>无默认配置，必须配置，用于配置存储快照文件的目录。如果没有配置dataLogDir，那么事务日志也会存储在此目录。</li>
</ul>
<h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><p>./zkServer.sh start<br>这个命令使得zk服务进程在后台进行。如果想在前台中运行以便查看服务器进程的输出日志，可以通过以下命令运行：<br>./zkServer.sh start-foreground<br>执行此命令，可以看到大量详细信息的输出，以便允许查看服务器发生了什么。</p>
<p>使用文本编辑器打开zkServer.cmd或者zkServer.sh文件，可以看到其会调用zkEnv.cmd或者zkEnv.sh脚本。zkEnv脚本的作用是设置zk运行的一些环境变量，例如配置文件的位置和名称等。</p>
<h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><p>如果是连接同一台主机上的zk进程，那么直接运行bin/目录下的zkCli.cmd（Windows环境下）或者zkCli.sh（Linux环境下），即可连接上zk。<br>直接执行zkCli.cmd或者zkCli.sh命令默认以主机号 127.0.0.1，端口号 2181 来连接zk，如果要连接不同机器上的zk，可以使用 -server 参数，例如：<br>bin/zkCli.sh -server 192.168.0.1:2181</p>
<h3 id="集群"><a href="#集群" class="headerlink" title="集群"></a>集群</h3><p>在集群模式下，建议至少部署3个zk进程，或者部署奇数个zk进程。如果只部署2个zk进程，当其中一个zk进程挂掉后，剩下的一个进程并不能构成一个quorum的大多数。因此，部署2个进程甚至比单机模式更不可靠，因为2个进程其中一个不可用的可能性比一个进程不可用的可能性还大。</p>
<h4 id="运行配置"><a href="#运行配置" class="headerlink" title="运行配置"></a>运行配置</h4><p>在集群模式下，所有的zk进程可以使用相同的配置文件（是指各个zk进程部署在不同的机器上面），例如如下配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">tickTime=2000</div><div class="line">dataDir=/home/myname/zookeeper</div><div class="line">clientPort=2181</div><div class="line">initLimit=5</div><div class="line">syncLimit=2</div><div class="line">server.1=192.168.229.160:2888:3888</div><div class="line">server.2=192.168.229.161:2888:3888</div><div class="line">server.3=192.168.229.162:2888:3888</div></pre></td></tr></table></figure></p>
<ul>
<li>initLimit<br>ZooKeeper集群模式下包含多个zk进程，其中一个进程为leader，余下的进程为follower。<br>当follower最初与leader建立连接时，它们之间会传输相当多的数据，尤其是follower的数据落后leader很多。initLimit配置follower与leader之间建立连接后进行同步的最长时间。</li>
<li>syncLimit<br>配置follower和leader之间发送消息，请求和应答的最大时间长度。</li>
<li>tickTime<br>tickTime则是上述两个超时配置的基本单位，例如对于initLimit，其配置值为5，说明其超时时间为 2000ms * 5 = 10秒。</li>
<li>server.id=host:port1:port2<br>其中id为一个数字，表示zk进程的id，这个id也是dataDir目录下myid文件的内容。<br>host是该zk进程所在的IP地址，port1表示follower和leader交换消息所使用的端口，port2表示选举leader所使用的端口。</li>
</ul>
<p><strong>注意 </strong><br>如果仅为了测试部署集群模式而在同一台机器上部署zk进程，server.id=host:port1:port2配置中的port参数必须不同。但是，为了减少机器宕机的风险，强烈建议在部署集群模式时，将zk进程部署不同的物理机器上面。</p>
<h4 id="启动-1"><a href="#启动-1" class="headerlink" title="启动"></a>启动</h4><p>假如我们打算在三台不同的机器 192.168.229.160，192.168.229.161，192.168.229.162上各部署一个zk进程，以构成一个zk集群。<br>三个zk进程均使用相同的 zoo.cfg 配置：</p>
<p>在三台机器dataDir目录（ /home/myname/zookeeper 目录）下，分别生成一个myid文件，其内容分别为1，2，3。然后分别在这三台机器上启动zk进程，这样我们便将zk集群启动了起来。</p>
<h4 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h4><p>可以使用以下命令来连接一个zk集群：<br>bin/zkCli.sh -server 192.168.229.160:2181,192.168.229.161:2181,192.168.229.162:2181</p>
<p>客户端连接zk集群的输出日志<br>从日志输出可以看到，客户端连接的是192.168.229.162:2181进程（连接上哪台机器的zk进程是随机的），客户端已成功连接上zk集群。<br>help<br>help命令会输出zk支持的所有命令。<br>ls<br>查看指定路径下包含的节点<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ls /</div><div class="line">[zookeeper]</div></pre></td></tr></table></figure></p>
<p>create<br>创建一个节点，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">create /zk mydata</div><div class="line">Created /zk</div></pre></td></tr></table></figure></p>
<p>get<br>显示指定路径下节点的信息，例如，我们检查一下上面的/zk节点最否创建成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">get /zk</div></pre></td></tr></table></figure></p>
<p>set<br>设置节点的内容，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">set /zk &quot;anotherData&quot;</div></pre></td></tr></table></figure></p>
<p>delete<br>删除一个节点，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[zk: localhost:2181(CONNECTED) 8] delete /zk</div><div class="line">[zk: localhost:2181(CONNECTED) 9] get /zk</div></pre></td></tr></table></figure></p>
<h2 id="Rabbitmq"><a href="#Rabbitmq" class="headerlink" title="Rabbitmq"></a>Rabbitmq</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>yum -y install socat<br>rpm -ivh erlang-19.0.4-1.el7.centos.x86_64.rpm<br>安装完成后执行erl命令，出现下图则代表成功<br>rpm -ql erlang</p>
<p>rpm -ivh rabbitmq-server-3.7.15-1.el7.noarch.rpm </p>
<p>rpm -q rabbitmq-server<br>rabbitmq-server-3.7.15-1.el7.noarch</p>
<p>systemctl list-unit-files<br>启动<br>systemctl start rabbitmq-server</p>
<p>//把包名相关的包都列出来<br>rpm -qa | grep 包名<br>//你想卸载的软件，后面是包名称，最后的版本号是不用打的<br>rpm -e 文件名</p>
<p>查看防火墙状态<br>firewall-cmd –state<br>1<br>停止firewall</p>
<p>systemctl stop firewalld.service<br>1<br>禁止firewall开机启动</p>
<p>systemctl disable firewalld.service </p>
<p>下载地址，找到其中一个版本即可<br><a href="https://dl.fedoraproject.org/pub/epel/" target="_blank" rel="external">https://dl.fedoraproject.org/pub/epel/</a><br>下载<br>wget <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="external">https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</a><br>安装完成即可<br>rpm -ivh epel-release-latest-7.noarch.rpm<br>yum install erlang<br>erlang 版本太低用不了从github 上找了一个安装失败版本有问题<br>./rabbitmq-server -detached #后台运行rabbitmq</p>
<p>yum remove erlang-erts.x86_64  卸载老版本</p>
<p>yum repolist<br>yum list installed</p>
<h1 id="firewall-cmd-–permanent-–add-port-15672-tcp"><a href="#firewall-cmd-–permanent-–add-port-15672-tcp" class="headerlink" title="firewall-cmd –permanent –add-port=15672/tcp"></a>firewall-cmd –permanent –add-port=15672/tcp</h1><h1 id="firewall-cmd-–permanent-–add-port-5672-tcp"><a href="#firewall-cmd-–permanent-–add-port-5672-tcp" class="headerlink" title="firewall-cmd –permanent –add-port=5672/tcp"></a>firewall-cmd –permanent –add-port=5672/tcp</h1><h1 id="systemctl-restart-firewalld-service"><a href="#systemctl-restart-firewalld-service" class="headerlink" title="systemctl restart firewalld.service"></a>systemctl restart firewalld.service</h1><p>1、查看RabbitMQ中用户命令</p>
<p>rabbitmqctl list_users</p>
<p>2、创建用户命令</p>
<p> rabbitmqctl add_user ygl ygl</p>
<p>3、赋予用户权限命令</p>
<p> rabbitmqctl  set_permissions -p “/“ ygl ‘.<em>‘ ‘.</em>‘ ‘.*’</p>
<p>4、赋予用户角色命令</p>
<p> rabbitmqctl set_user_tags hjp administrator</p>
<p>5、开启rabbitmq管理控制台命令</p>
<p>rabbitmq-plugins enable rabbitmq_management<br>url<br><a href="http://192.168.134.39:15672" target="_blank" rel="external">http://192.168.134.39:15672</a></p>
<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>ActiveMQ 是 Apache 出品的、采用 Java 语言编写的完全基于 JMS1.1 规范的面向消息的中间件，为应用程序提供高效的、可扩展的、稳定的和安全的企业级消息通信。不过由于历史原因包袱太重，目前市场份额没有后面三种消息中间件多，其最新架构被命名为 Apollo，号称下一代 ActiveMQ，有兴趣的同学可行了解。<br>RabbitMQ 是采用 Erlang 语言实现的 AMQP 协议的消息中间件，最初起源于金融系统，用于在分布式系统中存储转发消息。RabbitMQ 发展到今天，被越来越多的人认可，这和它在可靠性、可用性、扩展性、功能丰富等方面的卓越表现是分不开的。<br>Kafka 起初是由 LinkedIn 公司采用 Scala 语言开发的一个分布式、多分区、多副本且基于 zookeeper 协调的分布式消息系统，现已捐献给 Apache 基金会。它是一种高吞吐量的分布式发布订阅消息系统，以可水平扩展和高吞吐率而被广泛使用。目前越来越多的开源分布式处理系统如 Cloudera、Apache Storm、Spark、Flink 等都支持与 Kafka 集成。<br>RocketMQ 是阿里开源的消息中间件，目前已经捐献个 Apache 基金会，它是由 Java 语言开发的，具备高吞吐量、高可用性、适合大规模分布式系统应用等特点，经历过双 11 的洗礼，实力不容小觑。<br>ZeroMQ 号称史上最快的消息队列，基于 C 语言开发。ZeroMQ 是一个消息处理队列库，可在多线程、多内核和主机之间弹性伸缩，虽然大多数时候我们习惯将其归入消息队列家族之中，但是其和前面的几款有着本质的区别，ZeroMQ 本身就不是一个消息队列服务器，更像是一组底层网络通讯库，对原有的 Socket API 上加上一层封装而已。目前市面上的消息中间件还有很多，比如腾讯系的 PhxQueue、CMQ、CKafka，又比如基于 Go 语言的 NSQ，有时人们也把类似 Redis 的产品也看做消息中间件的一种，当然它们都很优秀，但是本文篇幅限制无法穷极所有，下面会针对性的挑选 RabbitMQ 和 Kafka 两款典型的消息中间件来做分析，力求站在一个公平公正的立场来阐述消息中间件选型中的各个要点。</p>
<h3 id="功能维度"><a href="#功能维度" class="headerlink" title="功能维度"></a>功能维度</h3><p>优先级队列：优先级队列不同于先进先出队列，优先级高的消息具备优先被消费的特权，这样可以为下游提供不同消息级别的保证。不过这个优先级也是需要有一个前提的：如果消费者的消费速度大于生产者的速度，并且消息中间件服务器（一般简单的称之为 Broker）中没有消息堆积，那么对于发送的消息设置优先级也就没有什么实质性的意义了，因为生产者刚发送完一条消息就被消费者消费了，那么就相当于 Broker 中至多只有一条消息，对于单条消息来说优先级是没有什么意义的。<br>延迟队列：当你在网上购物的时候是否会遇到这样的提示：“三十分钟之内未付款，订单自动取消”？这个是延迟队列的一种典型应用场景。延迟队列存储的是对应的延迟消息，所谓“延迟消息”是指当消息被发送以后，并不想让消费者立刻拿到消息，而是等待特定时间后，消费者才能拿到这个消息进行消费。延迟队列一般分为两种：基于消息的延迟和基于队列的延迟。基于消息的延迟是指为每条消息设置不同的延迟时间，那么每当队列中有新消息进入的时候就会重新根据延迟时间排序，当然这也会对性能造成极大的影响。实际应用中大多采用基于队列的延迟，设置不同延迟级别的队列，比如 5s、10s、30s、1min、5mins、10mins 等，每个队列中消息的延迟时间都是相同的，这样免去了延迟排序所要承受的性能之苦，通过一定的扫描策略（比如定时）即可投递超时的消息。<br>死信队列：由于某些原因消息无法被正确的投递，为了确保消息不会被无故的丢弃，一般将其置于一个特殊角色的队列，这个队列一般称之为死信队列。与此对应的还有一个“回退队列”的概念，试想如果消费者在消费时发生了异常，那么就不会对这一次消费进行确认（Ack）, 进而发生回滚消息的操作之后消息始终会放在队列的顶部，然后不断被处理和回滚，导致队列陷入死循环。为了解决这个问题，可以为每个队列设置一个回退队列，它和死信队列都是为异常的处理提供的一种机制保障。实际情况下，回退队列的角色可以由死信队列和重试队列来扮演。</p>
<p>重试队列：重试队列其实可以看成是一种回退队列，具体指消费端消费消息失败时，为防止消息无故丢失而重新将消息回滚到 Broker 中。与回退队列不同的是重试队列一般分成多个重试等级，每个重试等级一般也会设置重新投递延时，重试次数越多投递延时就越大。举个例子：消息第一次消费失败入重试队列 Q1，Q1 的重新投递延迟为 5s，在 5s 过后重新投递该消息；如果消息再次消费失败则入重试队列 Q2，Q2 的重新投递延迟为 10s，在 10s 过后再次投递该消息。以此类推，重试越多次重新投递的时间就越久，为此需要设置一个上限，超过投递次数就入死信队列。重试队列与延迟队列有相同的地方，都是需要设置延迟级别，它们彼此的区别是：延迟队列动作由内部触发，重试队列动作由外部消费端触发；延迟队列作用一次，而重试队列的作用范围会向后传递。</p>
<p>消费模式：消费模式分为推（push）模式和拉（pull）模式。推模式是指由 Broker 主动推送消息至消费端，实时性较好，不过需要一定的流制机制来确保服务端推送过来的消息不会压垮消费端。而拉模式是指消费端主动向 Broker 端请求拉取（一般是定时或者定量）消息，实时性较推模式差，但是可以根据自身的处理能力而控制拉取的消息量。</p>
<p>广播消费：消息一般有两种传递模式：点对点（P2P，Point-to-Point）模式和发布 / 订阅（Pub/Sub）模式。对于点对点的模式而言，消息被消费以后，队列中不会再存储，所以消息消费者不可能消费到已经被消费的消息。虽然队列可以支持多个消费者，但是一条消息只会被一个消费者消费。发布订阅模式定义了如何向一个内容节点发布和订阅消息，这个内容节点称为主题（topic），主题可以认为是消息传递的中介，消息发布者将消息发布到某个主题，而消息订阅者则从主题中订阅消息。主题使得消息的订阅者与消息的发布者互相保持独立，不需要进行接触即可保证消息的传递，发布 / 订阅模式在消息的一对多广播时采用。RabbitMQ 是一种典型的点对点模式，而 Kafka 是一种典型的发布订阅模式。但是 RabbitMQ 中可以通过设置交换器类型来实现发布订阅模式而达到广播消费的效果，Kafka 中也能以点对点的形式消费，你完全可以把其消费组（consumer group）的概念看成是队列的概念。不过对比来说，Kafka 中因为有了消息回溯功能的存在，对于广播消费的力度支持比 RabbitMQ 的要强。</p>
<p>消息回溯：一般消息在消费完成之后就被处理了，之后再也不能消费到该条消息。消息回溯正好相反，是指消息在消费完成之后，还能消费到之前被消费掉的消息。对于消息而言，经常面临的问题是“消息丢失”，至于是真正由于消息中间件的缺陷丢失还是由于使用方的误用而丢失一般很难追查，如果消息中间件本身具备消息回溯功能的话，可以通过回溯消费复现“丢失的”消息进而查出问题的源头之所在。消息回溯的作用远不止与此，比如还有索引恢复、本地缓存重建，有些业务补偿方案也可以采用回溯的方式来实现。</p>
<p>消息过滤：消息过滤是指按照既定的过滤规则为下游用户提供指定类别的消息。就以 kafka 而言，完全可以将不同类别的消息发送至不同的 topic 中，由此可以实现某种意义的消息过滤，或者 Kafka 还可以根据分区对同一个 topic 中的消息进行分类。不过更加严格意义上的消息过滤应该是对既定的消息采取一定的方式按照一定的过滤规则进行过滤。同样以 Kafka 为例，可以通过客户端提供的 ConsumerInterceptor 接口或者 Kafka Stream 的 filter 功能进行消息过滤。</p>
<p>消息堆积 + 持久化：流量削峰是消息中间件的一个非常重要的功能，而这个功能其实得益于其消息堆积能力。从某种意义上来讲，如果一个消息中间件不具备消息堆积的能力，那么就不能把它看做是一个合格的消息中间件。消息堆积分内存式堆积和磁盘式堆积。RabbitMQ 是典型的内存式堆积，但这并非绝对，在某些条件触发后会有换页动作来将内存中的消息换页到磁盘（换页动作会影响吞吐），或者直接使用惰性队列来将消息直接持久化至磁盘中。Kafka 是一种典型的磁盘式堆积，所有的消息都存储在磁盘中。一般来说，磁盘的容量会比内存的容量要大得多，对于磁盘式的堆积其堆积能力就是整个磁盘的大小。从另外一个角度讲，消息堆积也为消息中间件提供了冗余存储的功能。援引 纽约时报的案例，其直接将 Kafka 用作存储系统。</p>
<p>消息追踪：对于分布式架构系统中的链路追踪（trace）而言，大家一定不会陌生。对于消息中间件而言，消息的链路追踪（以下简称消息追踪）同样重要。对于消息追踪最通俗的理解就是要知道消息从哪来，存在哪里以及发往哪里去。基于此功能下，我们可以对发送或者消费完的消息进行链路追踪服务，进而可以进行问题的快速定位与排查。</p>
<p>多租户：也可以称为多重租赁技术，是一种软件架构技术，主要用来实现多用户的环境下公用相同的系统或程序组件，并且仍可以确保各用户间数据的隔离性。RabbitMQ 就能够支持多租户技术，每一个租户表示为一个 vhost，其本质上是一个独立的小型 RabbitMQ 服务器，又有自己独立的队列、交换器及绑定关系等，并且它拥有自己独立的权限。vhost 就像是物理机中的虚拟机一样，它们在各个实例间提供逻辑上的分离，为不同程序安全保密地允许数据，它既能将同一个 RabbitMQ 中的众多客户区分开，又可以避免队列和交换器等命名冲突。</p>
<p>多协议支持：消息是信息的载体，为了让生产者和消费者都能理解所承载的信息（生产者需要知道如何构造消息，消费者需要知道如何解析消息），它们就需要按照一种统一的格式描述消息，这种统一的格式称之为消息协议。有效的消息一定具有某种格式，而没有格式的消息是没有意义的。一般消息层面的协议有 AMQP、MQTT、STOMP、XMPP 等（消息领域中的 JMS 更多的是一个规范而不是一个协议），支持的协议越多其应用范围就会越广，通用性越强，比如 RabbitMQ 能够支持 MQTT 协议就让其在物联网应用中获得一席之地。还有的消息中间件是基于其本身的私有协议运转的，典型的如 Kafka。<br>跨语言支持：对很多公司而言，其技术栈体系中会有多种编程语言，如 C/C++、JAVA、Go、PHP 等，消息中间件本身具备应用解耦的特性，如果能够进一步的支持多客户端语言，那么就可以将此特性的效能扩大。跨语言的支持力度也可以从侧面反映出一个消息中间件的流行程度。</p>
<p>流量控制：流量控制（flow control）针对的是发送方和接收方速度不匹配的问题，提供一种速度匹配服务抑制发送速率使接收方应用程序的读取速率与之相适应。通常的流控方法有 Stop-and-wait、滑动窗口以及令牌桶等。</p>
<p>消息顺序性：顾名思义，消息顺序性是指保证消息有序。这个功能有个很常见的应用场景就是 CDC（Change Data Chapture），以 MySQL 为例，如果其传输的 binlog 的顺序出错，比如原本是先对一条数据加 1，然后再乘以 2，发送错序之后就变成了先乘以 2 后加 1 了，造成了数据不一致。</p>
<p>安全机制：在 Kafka 0.9 版本之后就开始增加了身份认证和权限控制两种安全机制。身份认证是指客户端与服务端连接进行身份认证，包括客户端与 Broker 之间、Broker 与 Broker 之间、Broker 与 ZooKeeper 之间的连接认证，目前支持 SSL、SASL 等认证机制。权限控制是指对客户端的读写操作进行权限控制，包括对消息或 Kafka 集群操作权限控制。权限控制是可插拔的，并支持与外部的授权服务进行集成。对于 RabbitMQ 而言，其同样提供身份认证（TLS/SSL、SASL）和权限控制（读写操作）的安全机制。</p>
<p>消息幂等性：对于确保消息在生产者和消费者之间进行传输而言一般有三种传输保障（delivery guarantee）：At most once，至多一次，消息可能丢失，但绝不会重复传输；At least once，至少一次，消息绝不会丢，但是可能会重复；Exactly once，精确一次，每条消息肯定会被传输一次且仅一次。对于大多数消息中间件而言，一般只提供 At most once 和 At least once 两种传输保障，对于第三种一般很难做到，由此消息幂等性也很难保证。Kafka 自 0.11 版本开始引入了幂等性和事务，Kafka 的幂等性是指单个生产者对于单分区单会话的幂等，而事务可以保证原子性地写入到多个分区，即写入到多个分区的消息要么全部成功，要么全部回滚，这两个功能加起来可以让 Kafka 具备 EOS（Exactly Once Semantic）的能力。不过如果要考虑全局的幂等，还需要与从上下游方面综合考虑，即关联业务层面，幂等处理本身也是业务层面所需要考虑的重要议题。以下游消费者层面为例，有可能消费者消费完一条消息之后没有来得及确认消息就发生异常，等到恢复之后又得重新消费原来消费过的那条消息，那么这种类型的消息幂等是无法有消息中间件层面来保证的。如果要保证全局的幂等，需要引入更多的外部资源来保证，比如以订单号作为唯一性标识，并且在下游设置一个去重表。</p>
<p>事务性消息：事务本身是一个并不陌生的词汇，事务是由事务开始（Begin Transaction）和事务结束（End Transaction）之间执行的全体操作组成。支持事务的消息中间件并不在少数，Kafka 和 RabbitMQ 都支持，不过此两者的事务是指生产者发生消息的事务，要么发送成功，要么发送失败。消息中间件可以作为用来实现分布式事务的一种手段，但其本身并不提供全局分布式事务的功能。</p>
<p>可靠性 + 可用性消息丢失是使用消息中间件时所不得不面对的一个同点，其背后消息可靠性也是衡量消息中间件好坏的一个关键因素。尤其是在金融支付领域，消息可靠性尤为重要。然而说到可靠性必然要说到可用性，注意这两者之间的区别，消息中间件的可靠性是指对消息不丢失的保障程度；而消息中间件的可用性是指无故障运行的时间百分比，通常用几个 9 来衡量。从狭义的角度来说，分布式系统架构是一致性协议理论的应用实现，对于消息可靠性和可用性而言也可以追溯到消息中间件背后的一致性协议。对于 Kafka 而言，其采用的是类似 PacificA 的一致性协议，通过 ISR（In-Sync-Replica）来保证多副本之间的同步，并且支持强一致性语义（通过 acks 实现）。对应的 RabbitMQ 是通过镜像环形队列实现多副本及强一致性语义的。多副本可以保证在 master 节点宕机异常之后可以提升 slave 作为新的 master 而继续提供服务来保障可用性。Kafka 设计之初是为日志处理而生，给人们留下了数据可靠性要求不要的不良印象，但是随着版本的升级优化，其可靠性得到极大的增强，详细可以参考 KIP101。就目前而言，在金融支付领域使用 RabbitMQ 居多，而在日志处理、大数据等方面 Kafka 使用居多，随着 RabbitMQ 性能的不断提升和 Kafka 可靠性的进一步增强，相信彼此都能在以前不擅长的领域分得一杯羹。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Linux环境/" rel="tag"># Linux环境</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/21/工作分析0921/" rel="next" title="工作总结分析">
                <i class="fa fa-chevron-left"></i> 工作总结分析
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/07/Redis/" rel="prev" title="Redis 相关知识总结">
                Redis 相关知识总结 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2018/09/22/linux环境安装/"
           data-title="Linux环境安装" data-url="http://guilongyue.github.io/2018/09/22/linux环境安装/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar" >
    <div class="sidebar-inner" >

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel" >
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="guilong yue" />
          <p class="site-author-name" itemprop="name">guilong yue</p>
          <p class="site-description motion-element" itemprop="description">一点浩然气，千里快哉风</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">109</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">107</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/guilongyue" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/your-user-name" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/p/1005052005322093" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/longshao1988" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
		<br/>
		<div>
		<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330px height=86px src="//music.163.com/outchain/player?type=2&id=29713754&auto=0&height=66"></iframe>
        </div>
		


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux环境安装"><span class="nav-number">1.</span> <span class="nav-text">Linux环境安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#nginx"><span class="nav-number">1.1.</span> <span class="nav-text">nginx</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tomcat"><span class="nav-number">1.2.</span> <span class="nav-text">Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-下载"><span class="nav-number">1.2.1.</span> <span class="nav-text">1. 下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-因为原有系统中安装了tomcat。需要重新修改环境变量。"><span class="nav-number">1.2.2.</span> <span class="nav-text">2. 因为原有系统中安装了tomcat。需要重新修改环境变量。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#当前没有开启防火墙"><span class="nav-number">1.2.3.</span> <span class="nav-text">当前没有开启防火墙</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看日志-查看关键词附近日志"><span class="nav-number">1.2.4.</span> <span class="nav-text">查看日志 查看关键词附近日志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rpm安装"><span class="nav-number">1.2.5.</span> <span class="nav-text">rpm安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#make-安装"><span class="nav-number">1.2.6.</span> <span class="nav-text">make 安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-中挖矿病毒"><span class="nav-number">1.3.</span> <span class="nav-text">　Linux 中挖矿病毒</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mongo"><span class="nav-number">1.4.</span> <span class="nav-text">mongo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#运行"><span class="nav-number">1.4.1.</span> <span class="nav-text">运行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#redis"><span class="nav-number">1.5.</span> <span class="nav-text">redis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#maven"><span class="nav-number">1.6.</span> <span class="nav-text">maven</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper"><span class="nav-number">1.7.</span> <span class="nav-text">zookeeper</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#单机"><span class="nav-number">1.7.1.</span> <span class="nav-text">单机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#配置"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">启动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链接"><span class="nav-number">1.7.1.3.</span> <span class="nav-text">链接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集群"><span class="nav-number">1.7.2.</span> <span class="nav-text">集群</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#运行配置"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">运行配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动-1"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">启动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#连接"><span class="nav-number">1.7.2.3.</span> <span class="nav-text">连接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rabbitmq"><span class="nav-number">1.8.</span> <span class="nav-text">Rabbitmq</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装"><span class="nav-number">1.8.1.</span> <span class="nav-text">安装</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#firewall-cmd-–permanent-–add-port-15672-tcp"><span class="nav-number">2.</span> <span class="nav-text">firewall-cmd –permanent –add-port=15672/tcp</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#firewall-cmd-–permanent-–add-port-5672-tcp"><span class="nav-number">3.</span> <span class="nav-text">firewall-cmd –permanent –add-port=5672/tcp</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#systemctl-restart-firewalld-service"><span class="nav-number">4.</span> <span class="nav-text">systemctl restart firewalld.service</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#介绍"><span class="nav-number">4.0.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#功能维度"><span class="nav-number">4.0.2.</span> <span class="nav-text">功能维度</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>

    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">guilong yue</span>
</div>


<div class="powered-by">
   <a class="theme-link" href="https://guilongyue.github.io">guilong yue</a> 个人专属
</div>

<div class="theme-info">
  博客 -
  龙
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"long1111"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  












  
  

  

  

  

  


</body>
</html>
